version: 2

sources:
  - name: ecw
    database: raw
    schema: ecw
    tables:

      - name: diagnosis
        columns:
          - name: EncounterId
            description: Encounter identifier from the source diagnosis table
          - name: ItemId
            description: Item identifier (diagnosis code / concept id)
          - name: displayIndex
            description: Display ordering index for diagnoses
          - name: PrimaryAsmt
            description: Flag indicating primary assessment/diagnosis

      - name: edi_facilities
        columns:
          - name: Id
            description: Primary key of the facilities table
            data_tests:
              - unique
              - not_null
          - name: name
            description: Facility name

      - name: edi_icdcodes
        columns:
          - name: ItemId
            description: Item identifier (links to itemdetail / diagnosis)
          - name: icd10flag
            description: Flag indicating ICD-10 mapping (1 = ICD-10)

      - name: enc
        columns:
          - name: encounterID
            description: Encounter identifier
          - name: patientID
            description: Patient identifier
          - name: invoiceID
            description: Invoice identifier
          - name: facilityId
            description: Facility identifier
          - name: ResourceId
            description: Resource identifier
          - name: doctorID
            description: Doctor identifier
          - name: ClaimReq
            description: Claim request flag/value
          - name: date
            description: Encounter date
          - name: encType
            description: Encounter type (e.g. 2 = phone call, 5 = lab visit, etc.)
          - name: STATUS
            description: Encounter status
          - name: reason
            description: Reason for visit
          - name: VisitType
            description: Visit type
          - name: deleteFlag
            description: Delete flag (0 = not deleted)
          - name: startTime
            description: Start time
          - name: endTime
            description: End time
          - name: arrivedTime
            description: Arrived time
          - name: depTime
            description: Departure time
          - name: encLock
            description: Encounter lock flag

      - name: hl7labdatadetail
        columns:
          - name: ReportId
            description: Report identifier from the source hl7labdatadetail table
          - name: name
            description: Name of the lab data element
          - name: value
            description: Observed value/result for the lab element
          - name: units
            description: Units of measurement for the value
          - name: range
            description: Reference/normal range for the lab value

      - name: icd
        columns:
          - name: Code
            description: ICD code value (primary code field)
          - name: ShortDesc
            description: Short description for the ICD code
          - name: LongDesc
            description: Long/extended description for the ICD code
          - name: codetype
            description: Source codetype as string ('9' or '10')

      - name: itemdetail
        columns:
          - name: itemID
            description: Item identifier from the source itemdetail table
          - name: value
            description: Value associated with the item
          - name: propID
            description: Property identifier associated with the item

      - name: items
        columns:
          - name: itemId
            description: Item identifier from the source items table
          - name: keyName
            description: Key name of the item
          - name: itemName
            description: Name/description of the item

      - name: labcptmap

      - name: labdata
        columns:
          - name: ReportId
            description: Report identifier from the source labdata table
          - name: EncounterId
            description: Encounter identifier associated with the lab data
          - name: ItemId
            description: Item identifier associated with the lab data
          - name: result
            description: Result value of the lab data
          - name: received
            description: Date the lab data was received
          - name: status
            description: Status of the lab data
          - name: ResultDate
            description: Date the lab result was generated
          - name: ReviewedDate
            description: Date the lab result was reviewed
          - name: priority
            description: Priority level of the lab data
          - name: assignedToId
            description: Identifier of the user assigned to the lab data

      - name: labdatadetail
        columns:
          - name: ReportId
            description: Report identifier from the source labdatadetail table
          - name: ItemId
            description: Item identifier associated with the lab data detail
          - name: value
            description: Value of the lab data detail
          - name: propId
            description: Property identifier associated with the lab data detail

      - name: labloinccodes
        columns:
          - name: itemid
            description: Item identifier from the source labloinccodes table
          - name: code
            description: Code associated with the labloinccodes item

      - name: problemlist
        columns:
          - name: patientId
            description: Patient identifier
            data_tests:
              - not_null
          - name: encounterId
            description: Encounter identifier (may be null)
          - name: AddedDate
            description: Date the problem was added in the source
          - name: onsetdate
            description: Onset date of the problem
          - name: resolvedon
            description: Resolution date of the problem
          - name: asmtId
            description: Assessment identifier from the source
            data_tests:
              - not_null
          - name: inactiveFlag
            description: Derived inactive flag (1 = inactive/resolved, 0 = active)
          - name: Resolved
            description: Boolean/int resolved indicator
          - name: deleteFlag
            description: Delete flag from source
          - name: status
            description: Derived status ('inactive', 'resolved', or 'active') based on inactiveFlag

      - name: users
        columns:
          - name: uid
            description: User identifier (primary key) from the source users table
          - name: ufname
            description: User first name
          - name: ulname
            description: User last name
          - name: dob
            description: Date of birth
          - name: sex
            description: Sex/gender at birth
          - name: uemail
            description: User email address
          - name: umobileno
            description: User mobile phone number
          - name: upPhone
            description: Alternate phone number
          - name: upaddress
            description: Primary address line 1
          - name: upaddress2
            description: Primary address line 2
          - name: upcity
            description: City of primary address
          - name: upstate
            description: State of primary address
          - name: zipcode
            description: ZIP/postal code
          - name: UserType
            description: User type / role